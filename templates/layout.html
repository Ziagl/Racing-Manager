<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="de" class="no-js">
<head>
	<meta charset="utf-8">
	<title>Racing-Manager.com</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta content="width=device-width, initial-scale=1" name="viewport"/>
	<meta name="description" content="Racing Manager">
	<meta name="author" content="Werner Ziegelwanger">
	
	<link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css"/>
	<link href="./content/assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
	<link href="./content/assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css"/>
	<link href="./content/assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
	<link href="./content/assets/global/plugins/uniform/css/uniform.default.css" rel="stylesheet" type="text/css"/>
	<link href="./content/assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css"/>
	<link href="./content/assets/global/plugins/gritter/css/jquery.gritter.css" rel="stylesheet" type="text/css"/>
	<link href="./content/assets/global/plugins/bootstrap-daterangepicker/daterangepicker-bs3.css" rel="stylesheet" type="text/css"/>
	<link href="./content/assets/global/plugins/spectrum/css/spectrum.css" rel="stylesheet" type="text/css"/>
	<link href="./content/assets/admin/pages/css/tasks.css" rel="stylesheet" type="text/css"/>
	
	{if $login == 1}
		<link href="./content/assets/global/plugins/select2/select2.css" rel="stylesheet" type="text/css"/>
		<link href="./content/assets/admin/pages/css/login.css" rel="stylesheet" type="text/css"/>
	{/if}
	<link href="./content/assets/global/css/components.css" rel="stylesheet" type="text/css"/>
	<link href="./content/assets/global/css/plugins.css" rel="stylesheet" type="text/css"/>
	<link href="./content/assets/admin/layout/css/layout.css" rel="stylesheet" type="text/css"/>
	<link href="./content/assets/admin/layout/css/themes/default.css" rel="stylesheet" type="text/css" id="style_color"/>
	<link href="./content/assets/admin/layout/css/custom.css" rel="stylesheet" type="text/css"/>
	<link rel="stylesheet" href="//code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css">

	<link rel="shortcut icon" href="favicon.ico"/>
	
	<script src="./content/assets/global/plugins/jquery-1.11.0.min.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/jquery.tablesorter.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/jquery.confirm.min.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/flot/jquery.flot.min.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/flot/jquery.flot.stack.min.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/flot/jquery.flot.resize.min.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/flot/jquery.flot.time.min.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/flot/jquery.flot.axislabels.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/canvg/rgbcolor.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/canvg/canvg.js" type="text/javascript"></script>
	<script type="text/javascript" src="./content/assets/global/plugins/spectrum/js/spectrum.js"></script>
</head>
{if $login == 1}
<body class="login">
{else}
<body class="page-header-fixed page-quick-sidebar-over-content page-sidebar-closed">
{if $track['weather'] < 31}
	<canvas id="canvas" style="pointer-events:none; position : fixed; top : 0px; left : 0px; z-index: 3;"></canvas>
{/if}
{/if}
    {if isset($header)}
        {include file="$header"}
    {/if}
	<div class="clearfix"></div>
	<div class="page-container">
    {if isset($menu)}
        {include file="$menu"}
    {/if}
    {if isset($content)}
        {include file="$content"}
    {/if}
	</div>
    {if isset($footer)}
        {include file="$footer"}
    {/if}
	<!--[if lt IE 9]>
	<script src="../../assets/global/plugins/respond.min.js"></script>
	<script src="../../assets/global/plugins/excanvas.min.js"></script> 
	<![endif]-->
	
	<script src="./content/assets/global/plugins/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/jquery-ui/jquery-ui-1.10.3.custom.min.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/jquery.cokie.min.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/uniform/jquery.uniform.min.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/jquery.pulsate.min.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/bootstrap-daterangepicker/moment.min.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/bootstrap-daterangepicker/daterangepicker.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/jquery-easypiechart/jquery.easypiechart.min.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/jquery.sparkline.min.js" type="text/javascript"></script>
	<script src="./content/assets/global/plugins/gritter/js/jquery.gritter.js" type="text/javascript"></script>
	
	<script src="./content/assets/global/scripts/metronic.js" type="text/javascript"></script>
	<script src="./content/assets/admin/layout/scripts/layout.js" type="text/javascript"></script>
	<script src="./content/assets/admin/pages/scripts/index.js" type="text/javascript"></script>
	<script src="./content/assets/admin/pages/scripts/components-pickers-mod.js"></script>
	
	{if $login == 1}
		<script src="./content/assets/global/plugins/jquery-validation/js/jquery.validate.min.js" type="text/javascript"></script>
		<script type="text/javascript" src="./content/assets/global/plugins/select2/select2.min.js"></script>
		<script src="./content/assets/global/scripts/metronic.js" type="text/javascript"></script>
		<script src="./content/assets/admin/layout/scripts/layout.js" type="text/javascript"></script>
		<script src="./content/assets/admin/layout/scripts/quick-sidebar.js" type="text/javascript"></script>
		<script src="./content/assets/admin/pages/scripts/login.js" type="text/javascript"></script>
	{/if}
	<script>
	jQuery(document).ready(function() {    
	   Metronic.init(); // init metronic core componets
	   Layout.init(); // init layout
	   //QuickSidebar.init() // init quick sidebar
	   Index.init();   
	   Index.initDashboardDaterange();
	   //Index.initJQVMAP(); // init index page's custom scripts
	   Index.initCalendar(); // init index page's custom scripts
	   Index.initCharts(); // init index page's custom scripts
	   //Index.initChat();
	   Index.initMiniCharts();
	   //Index.initIntro();
	   //Tasks.initDashboardWidget();
	   ComponentsPickers.init();
	});
	</script>
	<script type="text/javascript">
		jQuery('img.svg').each(function(){
            var $img = jQuery(this);
            var imgID = $img.attr('id');
            var imgClass = $img.attr('class');
            var imgURL = $img.attr('src');
            var size = $img.attr('width');
            var style = $img.attr('style');

            jQuery.get(imgURL, function(data) {
                // Get the SVG tag, ignore the rest
                var $svg = jQuery(data).find('svg');

                // Add replaced image's ID to the new SVG
                if(typeof imgID !== 'undefined') {
                    $svg = $svg.attr('id', imgID);
                }
                // Add replaced image's classes to the new SVG
                if(typeof imgClass !== 'undefined') {
                    $svg = $svg.attr('class', imgClass+' replaced-svg');
                }
                
                $svg = $svg.attr('width', size);
                $svg = $svg.attr('height', size);
                $path = $svg.attr('style', style);
                $path = $svg.find('path');
                $path = $path.attr('style', style);
                $polygon = $svg.find('polygon');
                $polygon = $polygon.attr('style', style);
                
                // Remove any invalid XML tags as per http://validator.w3.org
                $svg = $svg.removeAttr('xmlns:a');

                // Replace image with new SVG
                $img.replaceWith($svg);
            }, 'xml');
        });
	</script>
	{if $track['weather'] < 31 && $show_weather}
	<script>
		requestAnimFrame = (function() {
			return window.requestAnimationFrame ||
			window.webkitRequestAnimationFrame ||
			window.mozRequestAnimationFrame ||
			window.oRequestAnimationFrame ||
			window.msRequestAnimationFrame ||
			function(callback) {
				window.setTimeout(callback, 1000/60);
			};
		})();
		
		var canvas = document.getElementById('canvas');
		var ctx = canvas.getContext('2d');
			
		var width = 0;
		var height = 0;
		
		window.onresize = function onresize() {
			width = canvas.width = window.innerWidth;
			height = canvas.height = window.innerHeight;
		}
		
		window.onresize();
		
		var particules = [];
		var gouttes = [];
		var nombrebase = 2;//5;
		var nombreb = 1;//2;
		
		var controls = {
			rain : 5,
			Object : "Nothing",
			alpha : 0,
			color : 200,
			auto : false,
			opacity : 1,
			saturation : 100,
			lightness : 50,
			back : 1,
			red : 0,
			green : 0,
			blue : 0,
			multi : false,
			speed : 2
		};
		
		function Rain(X, Y, nombre) {
			if (!nombre) {
				nombre = nombreb;
			}
			while (nombre--) {
				particules.push( 
				{
					vitesseX : (Math.random() * 0.25),
					vitesseY : (Math.random() * 9) + 1,
					X : X,
					Y : Y,
					alpha : 1,
					couleur : "hsla(" + controls.color + "," + controls.saturation + "%, " + controls.lightness + "%," + controls.opacity + ")",
				})
			}
		}
		
		function explosion(X, Y, couleur, nombre) {
			if (!nombre) {
				nombre = nombrebase;
			}
			while (nombre--) {
				gouttes.push( 
				{
					vitesseX : (Math.random() * 4-2	),
					vitesseY : (Math.random() * -4 ),
					X : X,
					Y : Y,
					radius : 0.65 + Math.floor(Math.random() *1.6),
					alpha : 1,
					couleur : couleur
				})
			}
		}
		
		function rendu(ctx) {
		
			if (controls.multi == true) {
				controls.color = Math.random()*360;
			}
			
			ctx.clearRect ( 0 , 0 , width, height );
			//ctx.save();
			//ctx.fillStyle = 'rgba('+controls.red+','+controls.green+','+controls.blue+',' + controls.alpha + ')';
			//ctx.fillRect(0, 0, width, height);
			ctx.fillStyle = 'rgba('+controls.red+','+controls.green+','+controls.blue+',0.4)';
			ctx.fillRect(0, 0, width, height);
			
			var particuleslocales = particules;
			var goutteslocales = gouttes;
			var tau = Math.PI * 2;
		
			for (var i = 0, particulesactives; particulesactives = particuleslocales[i]; i++) {
					
				ctx.globalAlpha = particulesactives.alpha;
				ctx.fillStyle = particulesactives.couleur;
				ctx.fillRect(particulesactives.X, particulesactives.Y, particulesactives.vitesseY/4, particulesactives.vitesseY);
			}
		
			for (var i = 0, gouttesactives; gouttesactives = goutteslocales[i]; i++) {
					
				ctx.globalAlpha = gouttesactives.alpha;
				ctx.fillStyle = gouttesactives.couleur;
				
				ctx.beginPath();
				ctx.arc(gouttesactives.X, gouttesactives.Y, gouttesactives.radius, 0, tau);
				ctx.fill();
			}
				ctx.strokeStyle = "white";
				ctx.lineWidth   = 2;
		
			ctx.restore();
			
			if (controls.auto) {
				controls.color += controls.speed;
				if (controls.color >=360) {
					controls.color = 0;
				}
			}
		}
		
		function update() {
		
			var particuleslocales = particules;
			var goutteslocales = gouttes;
			
			for (var i = 0, particulesactives; particulesactives = particuleslocales[i]; i++) {
				particulesactives.X += particulesactives.vitesseX;
				particulesactives.Y += particulesactives.vitesseY+5;
				if (particulesactives.Y > height-15) {
					particuleslocales.splice(i--, 1);
					explosion(particulesactives.X, particulesactives.Y, particulesactives.couleur);
				}
			}
		
			for (var i = 0, gouttesactives; gouttesactives = goutteslocales[i]; i++) {
				gouttesactives.X += gouttesactives.vitesseX;
				gouttesactives.Y += gouttesactives.vitesseY;
				gouttesactives.radius -= 0.075;
				if (gouttesactives.alpha > 0) {
					gouttesactives.alpha -= 0.005;
				} else {
					gouttesactives.alpha = 0;
				}
				if (gouttesactives.radius < 0) {
					goutteslocales.splice(i--, 1);
				}
			}
		
			var i = controls.rain;
			while (i--) {
				Rain(Math.floor((Math.random()*width)), -15);
			}
		}
		
		function Screenshot() {
			window.open(canvas.toDataURL());
		}
		
		window.onload = function() {
			//nothing to do
		};
		
		(function boucle() {
			requestAnimFrame(boucle);
			update();
			rendu(ctx);
		})();
	</script>
	{/if}
	<script>
	$(".confirm").confirm({
		confirm: function(button) {
			var form = button.closest('form');
			form.submit();
		},
		cancel: function(button) {
			// nothing to do
		},
		confirmButton: "Ja",
		cancelButton: "Nein",
		post: true,
		confirmButtonClass: "btn-danger",
		cancelButtonClass: "btn-success",
		dialogClass: "modal-dialog modal-lg"
	});
	</script>
</body>
</html>
